{"ast":null,"code":"var _jsxFileName = \"F:\\\\voyaige\\\\proj\\\\front\\\\src\\\\components\\\\HomePage\\\\PreplannedTrip\\\\Tripdetail.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useLocation, useNavigate } from 'react-router-dom';\nimport _ from 'lodash';\nimport './Tripdetail.css';\nimport Navbar from '../../NavBar/Navbar';\nimport { User } from 'lucide-react';\nconst TripDetails = () => {\n  var _selectedRestaurant$i, _selectedHotel$images, _selectedAttraction$i;\n  const location = useLocation();\n  const navigate = useNavigate();\n  const {\n    cityData,\n    tripTitle,\n    tripImage\n  } = location.state || {};\n  const [reviewsData, setReviewsData] = useState([]);\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\n  const [HotelReviewsData, setHotelReviewsData] = useState([]);\n  const [totalPrice, setTotalPrice] = useState(0);\n  const [selectedHotel, setSelectedHotel] = useState(null);\n  const [selectedAttraction, setSelectedAttraction] = useState(null);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n  const [currentAttractionImageIndex, setCurrentAttractionImageIndex] = useState(0);\n  const [currentRestaurantImageIndex, setCurrentRestaurantImageIndex] = useState(0);\n  useEffect(() => {\n    window.scrollTo(0, 0);\n\n    // Fetch restaurant reviews data from JSON file\n    const fetchReviews = async () => {\n      try {\n        const response = await fetch('/restaurants_reviews.json');\n        const data = await response.json();\n\n        // Convert ratings to numbers and calculate average ratings\n        const formattedReviews = data.map(review => ({\n          ...review,\n          rating: parseFloat(review.rating) || 0 // Convert rating to number\n        }));\n        setReviewsData(formattedReviews);\n      } catch (error) {\n        console.error('Error fetching reviews:', error);\n      }\n    };\n    // Fetch restaurant reviews data from JSON file\n    const fetchHotelReviews = async () => {\n      try {\n        const response = await fetch('/hotel_reviews.json');\n        const data = await response.json();\n\n        // Convert ratings to numbers and calculate average ratings\n        const formattedHotelReviews = data.map(review => ({\n          ...review,\n          rating: parseFloat(review.rating) || 0 // Convert rating to number\n        }));\n        setHotelReviewsData(formattedHotelReviews);\n      } catch (error) {\n        console.error('Error fetching reviews:', error);\n      }\n    };\n    fetchReviews();\n    fetchHotelReviews();\n  }, [cityData]); // Re-fetch when cityData change\n\n  // Calculate total price based on hotel prices and number of days for each city\n  useEffect(() => {\n    if (cityData) {\n      let total = 0;\n      cityData.forEach(city => {\n        if (city.hotels && city.hotels.length > 0) {\n          const hotelPrice = city.hotels[0].price; // Assuming there's only one hotel per city\n          total += hotelPrice * city.days;\n        }\n      });\n      setTotalPrice(total);\n    }\n  }, [cityData]);\n\n  // Function to calculate the average rating of a restaurant\n  const calculateAverageRating = restaurantId => {\n    const restaurantReviews = reviewsData.filter(review => review.restaurant_id === restaurantId);\n    if (restaurantReviews.length === 0) return 0;\n\n    // Calculate the average rating using _.mean\n    const averageRating = _.mean(restaurantReviews.map(review => review.rating));\n    return averageRating.toFixed(1); // Round to 1 decimal place\n  };\n\n  // Function to get reviews for a restaurant\n  const getRestaurantReviews = restaurantId => {\n    return reviewsData.filter(review => review.restaurant_id === restaurantId);\n  };\n\n  // Function to calculate the average rating of a restaurant\n  const calculateAverageHotelRating = hotelId => {\n    const HotelReviews = HotelReviewsData.filter(review => review.hotel_id === hotelId);\n    if (HotelReviews.length === 0) return 0;\n    // Calculate the average rating using _.mean\n    const averageHotelRating = _.mean(HotelReviews.map(review => review.rating));\n    return averageHotelRating.toFixed(1); // Round to 1 decimal place\n  };\n\n  // Function to get reviews for a restaurant\n  const getHotelReviews = hotelId => {\n    return HotelReviewsData.filter(review => review.hotel_id === hotelId);\n  };\n\n  // Handle restaurant click\n  const handleRestaurantClick = restaurant => {\n    const reviews = getRestaurantReviews(restaurant.id);\n    setSelectedRestaurant({\n      ...restaurant,\n      reviews,\n      rating: calculateAverageRating(restaurant.id)\n    });\n  };\n  const handleAttractionClick = attraction => {\n    setSelectedAttraction(attraction);\n  };\n\n  // Handle restaurant click\n\n  const handleHotelClick = hotel => {\n    const hotelReviews = getHotelReviews(hotel.hotel_id);\n    setSelectedHotel({\n      ...hotel,\n      reviews: hotelReviews,\n      rating: calculateAverageHotelRating(hotel.hotel_id)\n    });\n  };\n  const handlePrevImage = () => {\n    setCurrentImageIndex(prevIndex => prevIndex === 0 ? selectedHotel.images.length - 1 : prevIndex - 1);\n  };\n  const handleNextImage = () => {\n    setCurrentImageIndex(prevIndex => prevIndex === selectedHotel.images.length - 1 ? 0 : prevIndex + 1);\n  };\n  const closeHotelCard = () => {\n    setSelectedHotel(null);\n  };\n  const closeDetailCard = () => {\n    setSelectedRestaurant(null);\n    setSelectedAttraction(null);\n  };\n  const handleNextRestaurantImage = () => {\n    setCurrentRestaurantImageIndex(prevIndex => prevIndex === selectedRestaurant.images.length - 1 ? 0 : prevIndex + 1);\n  };\n  const handlePrevRestaurantImage = () => {\n    setCurrentRestaurantImageIndex(prevIndex => prevIndex === 0 ? selectedRestaurant.images.length - 1 : prevIndex - 1);\n  };\n  const handleNextAttractionImage = () => {\n    setCurrentAttractionImageIndex(prevIndex => prevIndex === selectedAttraction.images.length - 1 ? 0 : prevIndex + 1);\n  };\n  const handlePrevAttractionImage = () => {\n    setCurrentAttractionImageIndex(prevIndex => prevIndex === 0 ? selectedAttraction.images.length - 1 : prevIndex - 1);\n  };\n  const fallbackDescriptions = ['A cozy dining spot offering a delightful blend of flavors, perfect for savoring both traditional and modern dishes.', 'With a warm ambiance and attentive service, it’s an ideal place for casual meals or special occasions.', 'The menu features fresh, locally sourced ingredients, ensuring every bite is a memorable experience.'];\n  const handleBooking = async () => {\n    if (!cityData || !tripTitle) {\n      alert('Missing trip data');\n      return;\n    }\n    const userData = JSON.parse(localStorage.getItem('user'));\n    const userEmail = userData === null || userData === void 0 ? void 0 : userData.email;\n    if (!userEmail) {\n      alert('User not logged in. Please log in to book the trip.');\n      return;\n    }\n    const bookingData = {\n      tripTitle,\n      email: userEmail,\n      cityBookings: cityData.map(city => ({\n        cityName: city.cityName,\n        days: city.days\n      }))\n    };\n    try {\n      const response = await fetch('http://localhost:5000/api/users/add-preplanned', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(bookingData)\n      });\n      if (response.ok) {\n        const hotelData = cityData.map(city => {\n          var _city$hotels$, _city$hotels$2;\n          return {\n            hotelName: ((_city$hotels$ = city.hotels[0]) === null || _city$hotels$ === void 0 ? void 0 : _city$hotels$.name) || 'Unknown',\n            hotelPrice: ((_city$hotels$2 = city.hotels[0]) === null || _city$hotels$2 === void 0 ? void 0 : _city$hotels$2.price) || 0\n          };\n        });\n        navigate('/checkout2', {\n          state: {\n            hotelData,\n            totalPrice\n          }\n        });\n      } else {\n        const data = await response.json();\n        alert(`Failed to book trip: ${data.message}`);\n      }\n    } catch (error) {\n      console.error('Error booking trip:', error);\n      alert('An error occurred while booking the trip');\n    }\n  };\n\n  // Split data by days and limit to 4 items max per day\n  const splitDataByDays = (items, days) => {\n    const itemsPerDay = Math.ceil(items.length / days);\n    return Array.from({\n      length: days\n    }, (_, i) => items.slice(i * itemsPerDay, (i + 1) * itemsPerDay).slice(0, 4) // Limit to 4 items per day\n    );\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-details-page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 7\n    }\n  }), tripImage && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-trip-image-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: tripImage,\n    alt: tripTitle,\n    className: \"trip-detail-trip-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  })), tripTitle && /*#__PURE__*/React.createElement(\"h1\", {\n    className: \"trip-detail-trip-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 21\n    }\n  }, tripTitle), cityData === null || cityData === void 0 ? void 0 : cityData.map((city, index) => {\n    var _city$hotels;\n    const splitRestaurants = splitDataByDays(city.restaurants || [], city.days);\n    const splitAttractions = splitDataByDays(city.attractions || [], city.days);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"trip-detail-city-section\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      className: \"trip-detail-city-name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 13\n      }\n    }, city.days, \" Days in \", city.cityName), Array.from({\n      length: city.days\n    }, (_, dayIndex) => {\n      var _splitRestaurants$day, _splitAttractions$day;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: dayIndex,\n        className: \"trip-detail-day-section\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 17\n        }\n      }, \"Day \", dayIndex + 1), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 17\n        }\n      }, \"Restaurants\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"trip-detail-list-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 276,\n          columnNumber: 17\n        }\n      }, (_splitRestaurants$day = splitRestaurants[dayIndex]) === null || _splitRestaurants$day === void 0 ? void 0 : _splitRestaurants$day.map((restaurant, idx) => {\n        var _restaurant$images;\n        const avgRating = calculateAverageRating(restaurant.id);\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: idx,\n          className: \"trip-detail-list-item\",\n          onClick: () => handleRestaurantClick(restaurant),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"trip-detail-hover-card\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: encodeURI((_restaurant$images = restaurant.images) === null || _restaurant$images === void 0 ? void 0 : _restaurant$images[0]) || '/placeholder.png',\n          alt: restaurant.name,\n          className: \"trip-detail-card-image\",\n          onError: e => {\n            e.target.onerror = null; // Prevent infinite loop in case fallback fails\n            e.target.src = 'https://cdn.vectorstock.com/i/preview-2x/44/16/spoon-and-fork-abstract-logo-graphic-food-icon-vector-26574416.webp';\n          },\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 27\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"trip-detail-hover-card-content\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 296,\n            columnNumber: 27\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 29\n          }\n        }, restaurant.name), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 29\n          }\n        }, \"\\u2B50 Rating : \", avgRating, \" (\", getRestaurantReviews(restaurant.id).length, \" reviews)\"))));\n      })), /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 17\n        }\n      }, \"Attractions\"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"trip-detail-list-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 17\n        }\n      }, (_splitAttractions$day = splitAttractions[dayIndex]) === null || _splitAttractions$day === void 0 ? void 0 : _splitAttractions$day.map((attraction, idx) => {\n        var _attraction$images;\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: idx,\n          className: \"trip-detail-list-item\",\n          onClick: () => handleAttractionClick(attraction),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 310,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(\"div\", {\n          className: \"trip-detail-hover-card\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 315,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"img\", {\n          src: ((_attraction$images = attraction.images) === null || _attraction$images === void 0 ? void 0 : _attraction$images[0]) || '/placeholder.png',\n          alt: attraction.name,\n          className: \"trip-detail-card-image\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }\n        }), /*#__PURE__*/React.createElement(\"div\", {\n          className: \"trip-detail-hover-card-content\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(\"h4\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 322,\n            columnNumber: 27\n          }\n        }, attraction.name), /*#__PURE__*/React.createElement(\"p\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 27\n          }\n        }, \"\\u2B50 Rating: \", attraction.rating))));\n      })));\n    }), /*#__PURE__*/React.createElement(\"h3\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 333,\n        columnNumber: 13\n      }\n    }, \"Hotels\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"trip-detail-list-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 13\n      }\n    }, (_city$hotels = city.hotels) === null || _city$hotels === void 0 ? void 0 : _city$hotels.map((hotel, idx) => {\n      var _hotel$images;\n      const avgHotelRating = calculateAverageHotelRating(hotel.hotel_id);\n      return /*#__PURE__*/React.createElement(\"div\", {\n        key: idx,\n        className: \"trip-detail-list-item\",\n        onClick: () => handleHotelClick(hotel),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 19\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"trip-detail-hover-card\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 21\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        src: ((_hotel$images = hotel.images) === null || _hotel$images === void 0 ? void 0 : _hotel$images[0]) || '/placeholder.png',\n        alt: hotel.name,\n        className: \"trip-detail-card-image\",\n        onError: e => {\n          e.target.onerror = null;\n          e.target.src = '/placeholder.png';\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"trip-detail-hover-card-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 23\n        }\n      }, /*#__PURE__*/React.createElement(\"h4\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 25\n        }\n      }, hotel.name), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 25\n        }\n      }, \"\\u2B50 Rating : \", avgHotelRating, \" (\", getHotelReviews(hotel.hotel_id).length, \" reviews)\"), hotel.price && /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 41\n        }\n      }, \"\\uD83D\\uDCB0 \", hotel.price))));\n    })));\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"trip-detail-booking\",\n    onClick: handleBooking,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 7\n    }\n  }, \"BOOK NOW (\", totalPrice > 0 ? `💰 Rs ${totalPrice.toFixed(2)}` : 'Calculating...', \")\"), selectedRestaurant && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-restaurant-detail-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 371,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"trip-detail-close-btn\",\n    onClick: closeDetailCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 16\n    }\n  }, \"\\u2715\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: ((_selectedRestaurant$i = selectedRestaurant.images) === null || _selectedRestaurant$i === void 0 ? void 0 : _selectedRestaurant$i[0]) || '/placeholder.png',\n    alt: selectedRestaurant.name,\n    className: \"trip-detail-restaurant-detail-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-restaurant-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 22\n    }\n  }, selectedRestaurant.name)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 18\n    }\n  }, \" Description :\", selectedRestaurant.description || fallbackDescriptions[Math.floor(Math.random() * fallbackDescriptions.length)], \" \"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 386,\n      columnNumber: 18\n    }\n  }, \"\\uD83D\\uDCCDAddress : \", selectedRestaurant.address), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 387,\n      columnNumber: 18\n    }\n  }, \"\\uD83D\\uDCDE Phone Number : \", selectedRestaurant.phoneNumber), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388,\n      columnNumber: 18\n    }\n  }, \"\\uD83D\\uDD52 Opning Time : \", selectedRestaurant.openHour), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 18\n    }\n  }, \"\\u2B50 Rating: \", selectedRestaurant.rating, \" (\", selectedRestaurant.reviews.length, \" reviews)\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 18\n    }\n  }, \"\\uD83D\\uDECE\\uFE0FServices Provided : \", selectedRestaurant.service)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-restaurant-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 395,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 396,\n      columnNumber: 18\n    }\n  }, \"Reviews:\"), selectedRestaurant.reviews.length > 0 ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"trip-detail-review-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 20\n    }\n  }, selectedRestaurant.reviews.map((review, idx) => /*#__PURE__*/React.createElement(\"li\", {\n    key: idx,\n    className: \"trip-detail-review-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 400,\n      columnNumber: 24\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 401,\n      columnNumber: 26\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-icon-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 403,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(User, {\n    className: \"profile-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 404,\n      columnNumber: 30\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 406,\n      columnNumber: 28\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 30\n    }\n  }, review.username), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 30\n    }\n  }, '★'.repeat(Math.round(review.rating)), '☆'.repeat(5 - Math.round(review.rating)), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 32\n    }\n  }, \"(\", review.rating, \")\")))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 26\n    }\n  }, review.review)))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 420,\n      columnNumber: 20\n    }\n  }, \"No reviews available.\")))), selectedHotel && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 428,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-hotel-detail-card scrollable-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 429,\n      columnNumber: 8\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"trip-detail-close-btn\",\n    onClick: closeHotelCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 430,\n      columnNumber: 10\n    }\n  }, \"\\u2715\"), ((_selectedHotel$images = selectedHotel.images) === null || _selectedHotel$images === void 0 ? void 0 : _selectedHotel$images.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-hotel-detail-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 433,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"carousel-arrow-hotel left-arrow\",\n    onClick: handlePrevImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 20\n    }\n  }, \"\\u276E\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: selectedHotel.images[currentImageIndex],\n    alt: selectedHotel.name,\n    className: \"trip-detail-hotel-detail-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 20\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"carousel-arrow-hotel right-arrow\",\n    onClick: handleNextImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 442,\n      columnNumber: 20\n    }\n  }, \"\\u276F\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-hotel-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 448,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"i\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 449,\n      columnNumber: 16\n    }\n  }, selectedHotel.name)), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 450,\n      columnNumber: 12\n    }\n  }, \"Description: \", selectedHotel.description || fallbackDescriptions[Math.floor(Math.random() * fallbackDescriptions.length)]), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 12\n    }\n  }, \"\\uD83D\\uDCCDAddress : \", selectedHotel.address), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 12\n    }\n  }, \"\\uD83D\\uDCDE Phone Number : \", selectedHotel.phoneNumber), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 12\n    }\n  }, \"\\u2B50 Rating: \", selectedHotel.rating, \" (\", selectedHotel.reviews.length, \" reviews)\"), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 457,\n      columnNumber: 12\n    }\n  }, \"\\uD83D\\uDECE\\uFE0FServices Provided : \", selectedHotel.facilities)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-restaurant-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 10\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 462,\n      columnNumber: 12\n    }\n  }, \"Reviews:\"), selectedHotel.reviews.length > 0 ? /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"trip-detail-review-list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 464,\n      columnNumber: 14\n    }\n  }, selectedHotel.reviews.map((review, idx) => /*#__PURE__*/React.createElement(\"li\", {\n    key: idx,\n    className: \"trip-detail-review-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 20\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile-icon-circle\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 468,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(User, {\n    className: \"profile-icon\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 469,\n      columnNumber: 24\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"review-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 471,\n      columnNumber: 22\n    }\n  }, /*#__PURE__*/React.createElement(\"strong\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 472,\n      columnNumber: 24\n    }\n  }, review.username), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"rating\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 473,\n      columnNumber: 24\n    }\n  }, '★'.repeat(Math.round(review.rating)), '☆'.repeat(5 - Math.round(review.rating)), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 26\n    }\n  }, \"(\", review.rating, \")\")))), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 480,\n      columnNumber: 20\n    }\n  }, review.review_text)))) : /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 485,\n      columnNumber: 14\n    }\n  }, \"No reviews available.\")))), selectedAttraction && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"overlay\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 493,\n      columnNumber: 12\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-attraction-detail-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 14\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"trip-detail-close-btn\",\n    onClick: closeDetailCard,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 495,\n      columnNumber: 16\n    }\n  }, \"\\u2715\"), ((_selectedAttraction$i = selectedAttraction.images) === null || _selectedAttraction$i === void 0 ? void 0 : _selectedAttraction$i.length) > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-attraction-detail-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 499,\n      columnNumber: 18\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"carousel-arrow-attraction left-arrow\",\n    onClick: handlePrevAttractionImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 500,\n      columnNumber: 20\n    }\n  }, \"\\u276E\"), /*#__PURE__*/React.createElement(\"img\", {\n    src: selectedAttraction.images[currentAttractionImageIndex],\n    alt: selectedAttraction.name,\n    className: \"trip-detail-attraction-detail-image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 503,\n      columnNumber: 20\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"carousel-arrow-attraction right-arrow\",\n    onClick: handleNextAttractionImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 508,\n      columnNumber: 20\n    }\n  }, \"\\u276F\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-detail-restaurant-section\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 513,\n      columnNumber: 16\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 514,\n      columnNumber: 18\n    }\n  }, selectedAttraction.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 515,\n      columnNumber: 18\n    }\n  }, \"Description: \", selectedAttraction.description || 'No description available'), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 518,\n      columnNumber: 18\n    }\n  }, \"\\uD83D\\uDCCD Address: \", selectedAttraction.address), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 519,\n      columnNumber: 18\n    }\n  }, \"\\uD83D\\uDCDE Phone: \", selectedAttraction.phoneNumber || 'N/A'), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 520,\n      columnNumber: 18\n    }\n  }, \"\\u2B50 Rating: \", selectedAttraction.rating), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 521,\n      columnNumber: 18\n    }\n  }, \"\\uD83C\\uDFF7\\uFE0F Category: \", selectedAttraction.category || 'N/A'), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 18\n    }\n  }, \"\\uD83D\\uDD52 Availability: \", selectedAttraction.availability || 'N/A')))));\n};\nexport default TripDetails;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","_","Navbar","User","TripDetails","_selectedRestaurant$i","_selectedHotel$images","_selectedAttraction$i","location","navigate","cityData","tripTitle","tripImage","state","reviewsData","setReviewsData","selectedRestaurant","setSelectedRestaurant","HotelReviewsData","setHotelReviewsData","totalPrice","setTotalPrice","selectedHotel","setSelectedHotel","selectedAttraction","setSelectedAttraction","currentImageIndex","setCurrentImageIndex","currentAttractionImageIndex","setCurrentAttractionImageIndex","currentRestaurantImageIndex","setCurrentRestaurantImageIndex","window","scrollTo","fetchReviews","response","fetch","data","json","formattedReviews","map","review","rating","parseFloat","error","console","fetchHotelReviews","formattedHotelReviews","total","forEach","city","hotels","length","hotelPrice","price","days","calculateAverageRating","restaurantId","restaurantReviews","filter","restaurant_id","averageRating","mean","toFixed","getRestaurantReviews","calculateAverageHotelRating","hotelId","HotelReviews","hotel_id","averageHotelRating","getHotelReviews","handleRestaurantClick","restaurant","reviews","id","handleAttractionClick","attraction","handleHotelClick","hotel","hotelReviews","handlePrevImage","prevIndex","images","handleNextImage","closeHotelCard","closeDetailCard","handleNextRestaurantImage","handlePrevRestaurantImage","handleNextAttractionImage","handlePrevAttractionImage","fallbackDescriptions","handleBooking","alert","userData","JSON","parse","localStorage","getItem","userEmail","email","bookingData","cityBookings","cityName","method","headers","body","stringify","ok","hotelData","_city$hotels$","_city$hotels$2","hotelName","name","message","splitDataByDays","items","itemsPerDay","Math","ceil","Array","from","i","slice","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","src","alt","index","_city$hotels","splitRestaurants","restaurants","splitAttractions","attractions","key","dayIndex","_splitRestaurants$day","_splitAttractions$day","idx","_restaurant$images","avgRating","onClick","encodeURI","onError","e","target","onerror","_attraction$images","_hotel$images","avgHotelRating","description","floor","random","address","phoneNumber","openHour","service","username","repeat","round","facilities","review_text","category","availability"],"sources":["F:/voyaige/proj/front/src/components/HomePage/PreplannedTrip/Tripdetail.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useLocation, useNavigate } from 'react-router-dom';\r\nimport _ from 'lodash';\r\nimport './Tripdetail.css';\r\nimport Navbar from '../../NavBar/Navbar';\r\nimport { User } from 'lucide-react';\r\n\r\nconst TripDetails = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const { cityData, tripTitle, tripImage } = location.state || {};\r\n  const [reviewsData, setReviewsData] = useState([]);\r\n  const [selectedRestaurant, setSelectedRestaurant] = useState(null);\r\n  const [HotelReviewsData, setHotelReviewsData] = useState([]);\r\n  const [totalPrice, setTotalPrice] = useState(0);\r\n\r\n  const [selectedHotel, setSelectedHotel] = useState(null);\r\n  const [selectedAttraction, setSelectedAttraction] = useState(null);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  const [currentAttractionImageIndex, setCurrentAttractionImageIndex] = useState(0);\r\n  const [currentRestaurantImageIndex, setCurrentRestaurantImageIndex] = useState(0);\r\n\r\n  useEffect(() => {\r\n     window.scrollTo(0, 0);\r\n   \r\n     // Fetch restaurant reviews data from JSON file\r\n     const fetchReviews = async () => {\r\n       try {\r\n         const response = await fetch('/restaurants_reviews.json');\r\n         const data = await response.json();\r\n   \r\n         // Convert ratings to numbers and calculate average ratings\r\n         const formattedReviews = data.map((review) => ({\r\n           ...review,\r\n           rating: parseFloat(review.rating) || 0, // Convert rating to number\r\n         }));\r\n   \r\n         setReviewsData(formattedReviews);\r\n       } catch (error) {\r\n         console.error('Error fetching reviews:', error);\r\n       }\r\n     };\r\n   // Fetch restaurant reviews data from JSON file\r\n   const fetchHotelReviews = async () => {\r\n     try {\r\n       const response = await fetch('/hotel_reviews.json');\r\n       const data = await response.json();\r\n \r\n       // Convert ratings to numbers and calculate average ratings\r\n       const formattedHotelReviews = data.map((review) => ({\r\n         ...review,\r\n         rating: parseFloat(review.rating) || 0, // Convert rating to number\r\n       }));\r\n \r\n       setHotelReviewsData(formattedHotelReviews);\r\n     } catch (error) {\r\n       console.error('Error fetching reviews:', error);\r\n     }\r\n   };\r\n \r\n \r\n     fetchReviews();\r\n     fetchHotelReviews();\r\n     \r\n    \r\n    \r\n   }, [cityData]); // Re-fetch when cityData change\r\n \r\n  // Calculate total price based on hotel prices and number of days for each city\r\n  useEffect(() => {\r\n   if (cityData) {\r\n     let total = 0;\r\n     cityData.forEach((city) => {\r\n       if (city.hotels && city.hotels.length > 0) {\r\n         const hotelPrice = city.hotels[0].price; // Assuming there's only one hotel per city\r\n         total += hotelPrice * city.days;\r\n       }\r\n     });\r\n     setTotalPrice(total);\r\n   }\r\n }, [cityData]);\r\n  \r\n \r\n  // Function to calculate the average rating of a restaurant\r\n  const calculateAverageRating = (restaurantId) => {\r\n   const restaurantReviews = reviewsData.filter(\r\n     (review) => review.restaurant_id === restaurantId\r\n     \r\n   );\r\n   if (restaurantReviews.length === 0) return 0;\r\n \r\n   // Calculate the average rating using _.mean\r\n   const averageRating = _.mean(restaurantReviews.map((review) => review.rating));\r\n   return averageRating.toFixed(1); // Round to 1 decimal place\r\n };\r\n \r\n // Function to get reviews for a restaurant\r\n const getRestaurantReviews = (restaurantId) => {\r\n   return reviewsData.filter((review) => review.restaurant_id === restaurantId);\r\n };\r\n  \r\n  // Function to calculate the average rating of a restaurant\r\n  const calculateAverageHotelRating = (hotelId) => {\r\n   const HotelReviews = HotelReviewsData.filter(\r\n     (review) => review.hotel_id === hotelId\r\n     \r\n   );\r\n   if (HotelReviews.length === 0) return 0;\r\n   // Calculate the average rating using _.mean\r\n   const averageHotelRating = _.mean(HotelReviews.map((review) => review.rating)); \r\n   return averageHotelRating.toFixed(1); // Round to 1 decimal place\r\n };\r\n \r\n // Function to get reviews for a restaurant\r\n const getHotelReviews = (hotelId) => {\r\n   \r\n   return HotelReviewsData.filter((review) => review.hotel_id === hotelId);\r\n };\r\n \r\n   // Handle restaurant click\r\n   const handleRestaurantClick = (restaurant) => {\r\n     const reviews = getRestaurantReviews(restaurant.id);\r\n     setSelectedRestaurant({ \r\n       ...restaurant, \r\n       reviews, \r\n       rating: calculateAverageRating(restaurant.id) \r\n     });\r\n   };\r\n \r\n   const handleAttractionClick = (attraction) => {\r\n     setSelectedAttraction(attraction);\r\n   };\r\n \r\n \r\n // Handle restaurant click\r\n \r\n   const handleHotelClick = (hotel) => {\r\n     const hotelReviews = getHotelReviews(hotel.hotel_id);\r\n     setSelectedHotel({ \r\n       ...hotel, \r\n       reviews: hotelReviews,\r\n       rating: calculateAverageHotelRating(hotel.hotel_id) \r\n     });\r\n   };\r\n   const handlePrevImage = () => {\r\n     setCurrentImageIndex((prevIndex) =>\r\n       prevIndex === 0 ? selectedHotel.images.length - 1 : prevIndex - 1\r\n     );\r\n   };\r\n \r\n   const handleNextImage = () => {\r\n     setCurrentImageIndex((prevIndex) =>\r\n       prevIndex === selectedHotel.images.length - 1 ? 0 : prevIndex + 1\r\n     );\r\n   };  \r\n \r\n \r\n const closeHotelCard = () => {setSelectedHotel(null)};\r\n \r\n   const closeDetailCard = () => {\r\n     setSelectedRestaurant(null);\r\n     setSelectedAttraction(null);\r\n   };\r\n \r\n   const handleNextRestaurantImage = () => {\r\n     setCurrentRestaurantImageIndex((prevIndex) =>\r\n       prevIndex === selectedRestaurant.images.length - 1 ? 0 : prevIndex + 1\r\n     );\r\n   };\r\n \r\n   const handlePrevRestaurantImage = () => {\r\n     setCurrentRestaurantImageIndex((prevIndex) =>\r\n       prevIndex === 0 ? selectedRestaurant.images.length - 1 : prevIndex - 1\r\n     );\r\n   };\r\n \r\n   const handleNextAttractionImage = () => {\r\n     setCurrentAttractionImageIndex((prevIndex) =>\r\n       prevIndex === selectedAttraction.images.length - 1 ? 0 : prevIndex + 1\r\n     );\r\n   };\r\n \r\n   const handlePrevAttractionImage = () => {\r\n     setCurrentAttractionImageIndex((prevIndex) =>\r\n       prevIndex === 0 ? selectedAttraction.images.length - 1 : prevIndex - 1\r\n     );\r\n   };\r\n   const fallbackDescriptions = [\r\n     'A cozy dining spot offering a delightful blend of flavors, perfect for savoring both traditional and modern dishes.',\r\n     'With a warm ambiance and attentive service, it’s an ideal place for casual meals or special occasions.',\r\n     'The menu features fresh, locally sourced ingredients, ensuring every bite is a memorable experience.'\r\n   ];\r\n\r\n  const handleBooking = async () => {\r\n    if (!cityData || !tripTitle) {\r\n      alert('Missing trip data');\r\n      return;\r\n    }\r\n  \r\n    const userData = JSON.parse(localStorage.getItem('user'));\r\n    const userEmail = userData?.email;\r\n  \r\n    if (!userEmail) {\r\n      alert('User not logged in. Please log in to book the trip.');\r\n      return;\r\n    }\r\n  \r\n    const bookingData = {\r\n      tripTitle,\r\n      email: userEmail,\r\n      cityBookings: cityData.map((city) => ({\r\n        cityName: city.cityName,\r\n        days: city.days,\r\n      })),\r\n    };\r\n  \r\n    try {\r\n      const response = await fetch('http://localhost:5000/api/users/add-preplanned', {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify(bookingData),\r\n      });\r\n  \r\n      if (response.ok) {\r\n        const hotelData = cityData.map((city) => ({\r\n          hotelName: city.hotels[0]?.name || 'Unknown',\r\n          hotelPrice: city.hotels[0]?.price || 0,\r\n        }));\r\n  \r\n        navigate('/checkout2', { state: { hotelData, totalPrice } });\r\n      } else {\r\n        const data = await response.json();\r\n        alert(`Failed to book trip: ${data.message}`);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error booking trip:', error);\r\n      alert('An error occurred while booking the trip');\r\n    }\r\n  };\r\n  \r\n\r\n  // Split data by days and limit to 4 items max per day\r\n  const splitDataByDays = (items, days) => {\r\n    const itemsPerDay = Math.ceil(items.length / days);\r\n    return Array.from({ length: days }, (_, i) =>\r\n      items.slice(i * itemsPerDay, (i + 1) * itemsPerDay).slice(0, 4) // Limit to 4 items per day\r\n    );\r\n  };\r\n\r\n  return (\r\n    <div className=\"trip-details-page\">\r\n      <Navbar />\r\n      {tripImage && (\r\n        <div className=\"trip-detail-trip-image-container\">\r\n          <img src={tripImage} alt={tripTitle} className=\"trip-detail-trip-image\" />\r\n        </div>\r\n      )}\r\n      {tripTitle && <h1 className=\"trip-detail-trip-title\">{tripTitle}</h1>}\r\n\r\n      {cityData?.map((city, index) => {\r\n        const splitRestaurants = splitDataByDays(city.restaurants || [], city.days);\r\n        const splitAttractions = splitDataByDays(city.attractions || [], city.days);\r\n\r\n        return (\r\n          <div className=\"trip-detail-city-section\" key={index}>\r\n            <h2 className=\"trip-detail-city-name\">\r\n              {city.days} Days in {city.cityName}\r\n            </h2>\r\n\r\n            {Array.from({ length: city.days }, (_, dayIndex) => (\r\n              <div key={dayIndex} className=\"trip-detail-day-section\">\r\n                <h3>Day {dayIndex + 1}</h3>\r\n\r\n                {/* Restaurants */}\r\n                <h4>Restaurants</h4>\r\n                <div className=\"trip-detail-list-container\">\r\n                  {splitRestaurants[dayIndex]?.map((restaurant, idx) => {\r\n                    const avgRating = calculateAverageRating(restaurant.id);\r\n                    return (\r\n                      <div\r\n                        key={idx}\r\n                        className=\"trip-detail-list-item\"\r\n                        onClick={() => handleRestaurantClick(restaurant)}\r\n                      >\r\n                        <div className=\"trip-detail-hover-card\">\r\n                          <img\r\n                            src={encodeURI(restaurant.images?.[0]) || '/placeholder.png'}\r\n                            alt={restaurant.name}\r\n                            className=\"trip-detail-card-image\"\r\n                            onError={(e) => {\r\n                              e.target.onerror = null; // Prevent infinite loop in case fallback fails\r\n                              e.target.src =\r\n                                'https://cdn.vectorstock.com/i/preview-2x/44/16/spoon-and-fork-abstract-logo-graphic-food-icon-vector-26574416.webp';\r\n                            }}\r\n                          />\r\n                          <div className=\"trip-detail-hover-card-content\">\r\n                            <h4>{restaurant.name}</h4>\r\n                            <p>⭐ Rating : {avgRating} ({getRestaurantReviews(restaurant.id).length} reviews)</p>\r\n                          </div>\r\n                        </div>\r\n                      </div>\r\n                    );\r\n                  })}\r\n                </div>\r\n\r\n                {/* Attractions */}\r\n                <h4>Attractions</h4>\r\n                <div className=\"trip-detail-list-container\">\r\n                  {splitAttractions[dayIndex]?.map((attraction, idx) => (\r\n                    <div\r\n                      key={idx}\r\n                      className=\"trip-detail-list-item\"\r\n                      onClick={() => handleAttractionClick(attraction)}\r\n                    >\r\n                      <div className=\"trip-detail-hover-card\">\r\n                        <img\r\n                          src={attraction.images?.[0] || '/placeholder.png'}\r\n                          alt={attraction.name}\r\n                          className=\"trip-detail-card-image\"\r\n                        />\r\n                        <div className=\"trip-detail-hover-card-content\">\r\n                          <h4>{attraction.name}</h4>\r\n                          <p>⭐ Rating: {attraction.rating}</p>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))}\r\n\r\n            {/* Hotels Section */}\r\n            <h3>Hotels</h3>\r\n            <div className=\"trip-detail-list-container\">\r\n              {city.hotels?.map((hotel, idx) => {\r\n                const avgHotelRating = calculateAverageHotelRating(hotel.hotel_id);\r\n\r\n                return (\r\n                  <div key={idx} className=\"trip-detail-list-item\" onClick={() => handleHotelClick(hotel)}>\r\n                    <div className=\"trip-detail-hover-card\">\r\n                      <img\r\n                        src={hotel.images?.[0] || '/placeholder.png'}\r\n                        alt={hotel.name}\r\n                        className=\"trip-detail-card-image\"\r\n                        onError={(e) => {\r\n                          e.target.onerror = null;\r\n                          e.target.src = '/placeholder.png';\r\n                        }}\r\n                      />\r\n                      <div className=\"trip-detail-hover-card-content\">\r\n                        <h4>{hotel.name}</h4>\r\n                        <p>⭐ Rating : {avgHotelRating} ({getHotelReviews(hotel.hotel_id).length} reviews)</p>\r\n                        {hotel.price && <p>💰 {hotel.price}</p>}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n\r\n      {/* BOOK NOW BUTTON */}\r\n      <button className=\"trip-detail-booking\" onClick={handleBooking}>\r\n        BOOK NOW ({totalPrice > 0 ? `💰 Rs ${totalPrice.toFixed(2)}` : 'Calculating...'})\r\n      </button>\r\n   \r\n         {selectedRestaurant && (\r\n           <div className=\"overlay\">\r\n             <div className=\"trip-detail-restaurant-detail-card\">\r\n               <button className=\"trip-detail-close-btn\" onClick={closeDetailCard}>✕</button>\r\n               \r\n               <img\r\n                 src={selectedRestaurant.images?.[0] || '/placeholder.png'}\r\n                 alt={selectedRestaurant.name}\r\n                 className=\"trip-detail-restaurant-detail-image\"\r\n               />\r\n   \r\n               {/* Section: Restaurant Details */}\r\n               <div className=\"trip-detail-restaurant-section\">\r\n                 <h2><i>{selectedRestaurant.name}</i></h2>\r\n                 <p> Description : \r\n                     {selectedRestaurant.description ||\r\n                   fallbackDescriptions[Math.floor(Math.random() * fallbackDescriptions.length)]} </p>\r\n                 <p>📍Address : {selectedRestaurant.address}</p>\r\n                 <p>📞 Phone Number : {selectedRestaurant.phoneNumber}</p>\r\n                 <p>🕒 Opning Time : {selectedRestaurant.openHour}</p>\r\n                 <p>⭐ Rating: {selectedRestaurant.rating} ({selectedRestaurant.reviews.length} reviews)</p>\r\n                 <p>🛎️Services Provided : {selectedRestaurant.service}</p>\r\n               \r\n               </div>\r\n   \r\n               {/* Section: Reviews */}\r\n               <div className=\"trip-detail-restaurant-section\">\r\n                 <h3>Reviews:</h3>\r\n                 {selectedRestaurant.reviews.length > 0 ? (\r\n                   <ul className=\"trip-detail-review-list\">\r\n                     {selectedRestaurant.reviews.map((review, idx) => (\r\n                       <li key={idx} className=\"trip-detail-review-item\">\r\n                         <div className=\"review-header\">\r\n                           {/* Circular User Icon */}\r\n                           <div className=\"profile-icon-circle\">\r\n                             <User className=\"profile-icon\" />\r\n                           </div>\r\n                           <div className=\"review-info\">\r\n                             <strong>{review.username}</strong>\r\n                             <div className=\"rating\">\r\n                               {'★'.repeat(Math.round(review.rating))}\r\n                               {'☆'.repeat(5 - Math.round(review.rating))}\r\n                               <span>({review.rating})</span>\r\n                             </div>\r\n                           </div>\r\n                         </div>\r\n                         <p>{review.review}</p>\r\n                       </li>\r\n                     ))}\r\n                   </ul>\r\n                 ) : (\r\n                   <p>No reviews available.</p>\r\n                 )}\r\n               </div>\r\n             </div>\r\n           </div>\r\n         )}\r\n   \r\n   {selectedHotel && (\r\n     <div className=\"overlay\">\r\n       <div className=\"trip-detail-hotel-detail-card scrollable-card\">\r\n         <button className=\"trip-detail-close-btn\" onClick={closeHotelCard}>✕</button>\r\n          {/* Image Carousel */}\r\n          {selectedHotel.images?.length > 0 && (\r\n                 <div className=\"trip-detail-hotel-detail-image\">\r\n                   <button className=\"carousel-arrow-hotel left-arrow\" onClick={handlePrevImage}>\r\n                     ❮\r\n                   </button>\r\n                   <img\r\n                     src={selectedHotel.images[currentImageIndex]}\r\n                     alt={selectedHotel.name}\r\n                     className=\"trip-detail-hotel-detail-image\"\r\n                   />\r\n                   <button className=\"carousel-arrow-hotel right-arrow\" onClick={handleNextImage}>\r\n                     ❯\r\n                   </button>\r\n                 </div>\r\n               )}\r\n         {/* Section: Hotel Details */}\r\n         <div className=\"trip-detail-hotel-section\">\r\n           <h2><i>{selectedHotel.name}</i></h2>\r\n           <p>\r\n             Description: {selectedHotel.description ||\r\n               fallbackDescriptions[Math.floor(Math.random() * fallbackDescriptions.length)]}\r\n           </p>\r\n           <p>📍Address : {selectedHotel.address}</p>\r\n           <p>📞 Phone Number : {selectedHotel.phoneNumber}</p>\r\n           <p>⭐ Rating: {selectedHotel.rating} ({selectedHotel.reviews.length} reviews)</p>\r\n           <p>🛎️Services Provided : {selectedHotel.facilities}</p>\r\n         </div>\r\n   \r\n         {/* Section: Reviews */}\r\n         <div className=\"trip-detail-restaurant-section\">\r\n           <h3>Reviews:</h3>\r\n           {selectedHotel.reviews.length > 0 ? (\r\n             <ul className=\"trip-detail-review-list\">\r\n               {selectedHotel.reviews.map((review, idx) => (\r\n                 <li key={idx} className=\"trip-detail-review-item\">\r\n                   <div className=\"review-header\">\r\n                     <div className=\"profile-icon-circle\">\r\n                       <User className=\"profile-icon\" />\r\n                     </div>\r\n                     <div className=\"review-info\">\r\n                       <strong>{review.username}</strong>\r\n                       <div className=\"rating\">\r\n                         {'★'.repeat(Math.round(review.rating))}\r\n                         {'☆'.repeat(5 - Math.round(review.rating))}\r\n                         <span>({review.rating})</span>\r\n                       </div>\r\n                     </div>\r\n                   </div>\r\n                   <p>{review.review_text}</p>\r\n                 </li>\r\n               ))}\r\n             </ul>\r\n           ) : (\r\n             <p>No reviews available.</p>\r\n           )}\r\n         </div>\r\n       </div>\r\n     </div>\r\n   )}\r\n      {/* Attraction Detail Card */}\r\n      {selectedAttraction && (\r\n           <div className=\"overlay\">\r\n             <div className=\"trip-detail-attraction-detail-card\">\r\n               <button className=\"trip-detail-close-btn\" onClick={closeDetailCard}>\r\n                 ✕\r\n               </button>\r\n               {selectedAttraction.images?.length > 0 && (\r\n                 <div className=\"trip-detail-attraction-detail-image\">\r\n                   <button className=\"carousel-arrow-attraction left-arrow\" onClick={handlePrevAttractionImage}>\r\n                     ❮\r\n                   </button>\r\n                   <img\r\n                     src={selectedAttraction.images[currentAttractionImageIndex]}\r\n                     alt={selectedAttraction.name}\r\n                     className=\"trip-detail-attraction-detail-image\"\r\n                   />\r\n                   <button className=\"carousel-arrow-attraction right-arrow\" onClick={handleNextAttractionImage}>\r\n                     ❯\r\n                   </button>\r\n                 </div>\r\n               )}\r\n               <div className=\"trip-detail-restaurant-section\">\r\n                 <h2>{selectedAttraction.name}</h2>\r\n                 <p>\r\n                   Description: {selectedAttraction.description || 'No description available'}\r\n                 </p>\r\n                 <p>📍 Address: {selectedAttraction.address}</p>\r\n                 <p>📞 Phone: {selectedAttraction.phoneNumber || 'N/A'}</p>\r\n                 <p>⭐ Rating: {selectedAttraction.rating}</p>\r\n                 <p>\r\n                   🏷️ Category: {selectedAttraction.category || 'N/A'}\r\n                 </p>\r\n                 <p>🕒 Availability: {selectedAttraction.availability || 'N/A'}</p>\r\n               </div>\r\n             </div>\r\n           </div>\r\n         )}\r\n        \r\n   \r\n       </div>\r\n     );\r\n   };\r\n   \r\n   \r\n   export default TripDetails;\r\n   "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}