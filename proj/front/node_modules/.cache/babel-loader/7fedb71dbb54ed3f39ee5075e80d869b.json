{"ast":null,"code":"var _jsxFileName = \"D:\\\\Voyaige\\\\proj\\\\front\\\\src\\\\components\\\\CityPage\\\\panorama.js\";\n// src/components/CityPage/panorama.jsx\nimport React, { useEffect, useRef, useState } from 'react';\nimport panoramaData from './panoramadata.js';\nimport './panorama.css';\nconst PanoramaViewer = ({\n  cityName,\n  showPanorama,\n  onClose\n}) => {\n  const panoramaRef = useRef(null);\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\n\n  // Get images for the current city\n  const images = panoramaData[cityName] || [];\n  useEffect(() => {\n    // Dynamically load Pannellum JS and CSS\n    const pannellumCSS = document.createElement('link');\n    pannellumCSS.rel = 'stylesheet';\n    pannellumCSS.href = 'https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css';\n    document.head.appendChild(pannellumCSS);\n    const pannellumJS = document.createElement('script');\n    pannellumJS.src = 'https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js';\n    pannellumJS.onload = () => {\n      if (showPanorama && panoramaRef.current && images.length > 0) {\n        window.pannellum.viewer(panoramaRef.current, {\n          \"type\": \"equirectangular\",\n          \"panorama\": images[currentImageIndex],\n          \"autoLoad\": true,\n          \"autoRotate\": -2,\n          \"showZoomCtrl\": true,\n          \"showFullscreenCtrl\": true\n        });\n      }\n    };\n    document.body.appendChild(pannellumJS);\n    return () => {\n      document.head.removeChild(pannellumCSS);\n      document.body.removeChild(pannellumJS);\n    };\n  }, [showPanorama, currentImageIndex, images]);\n  const nextImage = e => {\n    e.stopPropagation();\n    setCurrentImageIndex(prevIndex => (prevIndex + 1) % images.length);\n  };\n  const prevImage = e => {\n    e.stopPropagation();\n    setCurrentImageIndex(prevIndex => (prevIndex - 1 + images.length) % images.length);\n  };\n  if (!showPanorama || images.length === 0) return null;\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panorama-overlay\",\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"panorama-popup\",\n    onClick: e => e.stopPropagation(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"close-button\",\n    onClick: onClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }\n  }, \"\\xD7\"), /*#__PURE__*/React.createElement(\"div\", {\n    ref: panoramaRef,\n    className: \"panorama-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"prev-image-button\",\n    onClick: prevImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 7\n    }\n  }, \"\\u25C4\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"next-image-button\",\n    onClick: nextImage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }\n  }, \"\\u25BA\"));\n};\nexport default PanoramaViewer;","map":{"version":3,"names":["React","useEffect","useRef","useState","panoramaData","PanoramaViewer","cityName","showPanorama","onClose","panoramaRef","currentImageIndex","setCurrentImageIndex","images","pannellumCSS","document","createElement","rel","href","head","appendChild","pannellumJS","src","onload","current","length","window","pannellum","viewer","body","removeChild","nextImage","e","stopPropagation","prevIndex","prevImage","className","onClick","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","ref"],"sources":["D:/Voyaige/proj/front/src/components/CityPage/panorama.js"],"sourcesContent":["// src/components/CityPage/panorama.jsx\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport panoramaData from './panoramadata.js';\r\nimport './panorama.css';\r\n\r\nconst PanoramaViewer = ({ cityName, showPanorama, onClose }) => {\r\n  const panoramaRef = useRef(null);\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n  \r\n  // Get images for the current city\r\n  const images = panoramaData[cityName] || [];\r\n\r\n  useEffect(() => {\r\n    // Dynamically load Pannellum JS and CSS\r\n    const pannellumCSS = document.createElement('link');\r\n    pannellumCSS.rel = 'stylesheet';\r\n    pannellumCSS.href = 'https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.css';\r\n    document.head.appendChild(pannellumCSS);\r\n\r\n    const pannellumJS = document.createElement('script');\r\n    pannellumJS.src = 'https://cdn.jsdelivr.net/npm/pannellum/build/pannellum.js';\r\n    pannellumJS.onload = () => {\r\n      if (showPanorama && panoramaRef.current && images.length > 0) {\r\n        window.pannellum.viewer(panoramaRef.current, {\r\n          \"type\": \"equirectangular\",\r\n          \"panorama\": images[currentImageIndex],\r\n          \"autoLoad\": true,\r\n          \"autoRotate\": -2,\r\n          \"showZoomCtrl\": true,\r\n          \"showFullscreenCtrl\": true\r\n        });\r\n      }\r\n    };\r\n    document.body.appendChild(pannellumJS);\r\n\r\n    return () => {\r\n      document.head.removeChild(pannellumCSS);\r\n      document.body.removeChild(pannellumJS);\r\n    };\r\n  }, [showPanorama, currentImageIndex, images]);\r\n\r\n  const nextImage = (e) => {\r\n    e.stopPropagation();\r\n    setCurrentImageIndex((prevIndex) => (prevIndex + 1) % images.length);\r\n  };\r\n\r\n  const prevImage = (e) => {\r\n    e.stopPropagation();\r\n    setCurrentImageIndex((prevIndex) => \r\n      (prevIndex - 1 + images.length) % images.length\r\n    );\r\n  };\r\n\r\n  if (!showPanorama || images.length === 0) return null;\r\n\r\n  return (\r\n    <div className=\"panorama-overlay\" onClick={onClose}>\r\n      <div className=\"panorama-popup\" onClick={(e) => e.stopPropagation()}>\r\n        <button className=\"close-button\" onClick={onClose}>×</button>\r\n        <div \r\n          ref={panoramaRef} \r\n          className=\"panorama-container\"\r\n        ></div>\r\n      </div>\r\n      <button className=\"prev-image-button\" onClick={prevImage}>◄</button>\r\n      <button className=\"next-image-button\" onClick={nextImage}>►</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PanoramaViewer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}