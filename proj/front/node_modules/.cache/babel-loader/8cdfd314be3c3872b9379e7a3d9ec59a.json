{"ast":null,"code":"var _jsxFileName = \"F:\\\\Web\\\\Voyaige\\\\Voyaige\\\\proj\\\\front\\\\src\\\\components\\\\CheckoutPage\\\\CheckoutPage.js\";\nimport React, { useState, useEffect } from 'react';\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport axios from 'axios';\nimport { CreditCard, Lock, Calendar, User, Shield } from 'lucide-react';\nimport './CheckoutPage.css';\nimport Navbar from '../NavBar/Navbar';\nimport './Checkout2.css';\nconst CheckoutPage = () => {\n  const stripe = useStripe();\n  const elements = useElements();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(false);\n  const [promoCode, setPromoCode] = useState('');\n  const [isCardFocused, setIsCardFocused] = useState(false);\n  const [tripData, setTripData] = useState(null);\n  const [initialLoad, setInitialLoad] = useState(true);\n  const [applyingPromo, setApplyingPromo] = useState(false);\n  const [promoDiscount, setPromoDiscount] = useState(0);\n  const [promoError, setPromoError] = useState(null);\n\n  // Load trip data from location state or API\n  useEffect(() => {\n    const fetchTripData = async () => {\n      try {\n        var _location$state;\n        if ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.tripId) {\n          const response = await axios.get(`http://localhost:5000/api/trips/${location.state.tripId}`);\n          console.log(response);\n          if (response.data && response.data.checkoutData) {\n            setTripData({\n              days: response.data.checkoutData.days || [],\n              discountPercentage: response.data.checkoutData.discountPercentage || 0,\n              summary: response.data.checkoutData.summary || {}\n            });\n          } else {\n            setError(\"Trip data not found or incomplete\");\n          }\n        } else {\n          // Redirect to customization page if no trip ID is provided\n          navigate('/UserCustomization');\n        }\n      } catch (err) {\n        console.error(\"Error fetching trip data:\", err);\n        setError(\"Could not load trip data. Please try again.\");\n      } finally {\n        setInitialLoad(false);\n      }\n    };\n    fetchTripData();\n  }, [location.state, navigate]);\n\n  // Calculate totals from trip data\n  const calculateTotals = () => {\n    if (!tripData || !tripData.days) return {\n      subtotal: 0,\n      discount: 0,\n      total: 0\n    };\n    const subtotal = tripData.days.reduce((sum, day) => sum + day.totalCost, 0);\n    const pointsDiscount = subtotal * (tripData.discountPercentage || 0) / 100;\n    const promoAmount = subtotal * promoDiscount / 100;\n    const totalDiscount = pointsDiscount + promoAmount;\n    const total = subtotal - totalDiscount;\n    return {\n      subtotal,\n      discount: totalDiscount,\n      total,\n      pointsDiscount,\n      promoAmount\n    };\n  };\n\n  // Handle promo code application\n  const handleApplyPromo = async () => {\n    if (!promoCode.trim()) {\n      setPromoError(\"Please enter a promo code\");\n      return;\n    }\n    setApplyingPromo(true);\n    setPromoError(null);\n    try {\n      // Mock API call for promo code validation\n      // In a real application, this would be a call to your backend\n      // const response = await axios.post('http://localhost:5000/api/validate-promo', { code: promoCode });\n\n      // Simulating API response for demo purposes\n      const mockValidCodes = {\n        'WELCOME10': 10,\n        'TRAVEL20': 20,\n        'FIRSTTRIP': 15\n      };\n      if (mockValidCodes[promoCode.toUpperCase()]) {\n        setPromoDiscount(mockValidCodes[promoCode.toUpperCase()]);\n        setPromoError(null);\n      } else {\n        setPromoError(\"Invalid promo code\");\n        setPromoDiscount(0);\n      }\n    } catch (err) {\n      setPromoError(\"Error applying promo code\");\n      setPromoDiscount(0);\n    } finally {\n      setApplyingPromo(false);\n    }\n  };\n\n  // Handle redirection after successful payment\n  useEffect(() => {\n    if (success) {\n      const timer = setTimeout(() => {\n        navigate('/cart', {\n          state: {\n            tripData: tripData,\n            paymentDetails: {\n              amount: calculateTotals().total,\n              date: new Date().toISOString(),\n              status: 'Paid'\n            }\n          }\n        });\n      }, 2000);\n      return () => clearTimeout(timer);\n    }\n  }, [success, navigate, tripData, calculateTotals]); // Added calculateTotals to dependency array\n\n  // Handle payment submission\n  const handleSubmit = async event => {\n    event.preventDefault();\n    setLoading(true);\n    setError(null);\n    if (!stripe || !elements) {\n      setError(\"Stripe is not properly initialized\");\n      setLoading(false);\n      return;\n    }\n    try {\n      const {\n        total\n      } = calculateTotals();\n\n      // Create payment intent\n      const response = await axios.post('http://localhost:5000/api/payment-intent', {\n        amount: total\n      });\n      if (response.status !== 200) {\n        throw new Error(`Error: ${response.data.message}`);\n      }\n      const {\n        clientSecret\n      } = response.data;\n\n      // Confirm card payment\n      const {\n        error: stripeError,\n        paymentIntent\n      } = await stripe.confirmCardPayment(clientSecret, {\n        payment_method: {\n          card: elements.getElement(CardElement)\n        }\n      });\n      if (stripeError) {\n        setError(stripeError.message);\n        setSuccess(false);\n      } else if (paymentIntent.status === 'succeeded') {\n        var _location$state2;\n        // Update trip status to 'paid' in the database\n        if ((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.tripId) {\n          await axios.patch(`http://localhost:5000/api/trips/${location.state.tripId}`, {\n            status: 'paid',\n            paymentDetails: {\n              amount: total,\n              date: new Date().toISOString(),\n              method: 'card',\n              promoApplied: promoDiscount > 0 ? promoCode : null,\n              promoDiscount: promoDiscount\n            }\n          });\n        }\n        setSuccess(true);\n        setError(null);\n      } else {\n        setError(`Payment status: ${paymentIntent.status}. Please try again.`);\n        setSuccess(false);\n      }\n    } catch (err) {\n      setError(err.message || \"An error occurred while processing your payment\");\n      setSuccess(false);\n    }\n    setLoading(false);\n  };\n\n  // Show loading state during initial data fetch\n  if (initialLoad) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkout-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkout-content fade-in loading-state\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"loading-spinner\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198,\n        columnNumber: 11\n      }\n    }, \"Loading your trip details...\")));\n  }\n\n  // Show error state if trip data couldn't be loaded\n  if (!tripData && !initialLoad) {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkout-container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(Navbar, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"checkout-content fade-in error-state\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"error-icon\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 11\n      }\n    }, \"\\u26A0\\uFE0F\"), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211,\n        columnNumber: 11\n      }\n    }, \"Unable to load trip details\"), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 11\n      }\n    }, error || \"Please try again or contact support.\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"retry-button\",\n      onClick: () => window.location.reload(),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 11\n      }\n    }, \"Retry\")));\n  }\n  const {\n    subtotal,\n    discount,\n    total,\n    pointsDiscount,\n    promoAmount\n  } = calculateTotals();\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Navbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-content fade-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 11\n    }\n  }, \"Complete Your Payment\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"secure-badge\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Shield, {\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 13\n    }\n  }), \" Secured & Encrypted\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"checkout-grid\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"summary-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 237,\n      columnNumber: 15\n    }\n  }, \"Trip Summary\"), /*#__PURE__*/React.createElement(CreditCard, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 15\n    }\n  })), tripData && tripData.summary && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-overview\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-route\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    className: \"from\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 19\n    }\n  }, tripData.summary.from), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"separator\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 19\n    }\n  }, \"\\u2192\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"to\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 19\n    }\n  }, tripData.summary.to)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-dates\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Calendar, {\n    size: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 19\n    }\n  }, new Date(tripData.summary.startDate).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric'\n  }), \" - \", new Date(tripData.summary.endDate).toLocaleDateString('en-US', {\n    month: 'short',\n    day: 'numeric',\n    year: 'numeric'\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trip-guests\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(User, {\n    size: 14,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 19\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 261,\n      columnNumber: 19\n    }\n  }, \"Budget: \", tripData.summary.guests === 1 ? 'Economic' : tripData.summary.guests === 2 ? 'Normal' : tripData.summary.guests === 3 ? 'Deluxe' : 'N/A', \" \\u2022 \", tripData.summary.duration, \" \", tripData.summary.duration > 1 ? 'Days' : 'Day'))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cost-breakdown\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 13\n    }\n  }, tripData && tripData.days.map((day, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"cost-item slide-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 19\n    }\n  }, day.title), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cost\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 270,\n      columnNumber: 19\n    }\n  }, day.totalCost.toLocaleString()))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"cost-divider\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"subtotal cost-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 17\n    }\n  }, \"Sub-total\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cost\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 278,\n      columnNumber: 17\n    }\n  }, subtotal.toLocaleString())), pointsDiscount > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"discount cost-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 19\n    }\n  }, \"Points Discount (\", tripData.discountPercentage, \"%)\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cost-discount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 284,\n      columnNumber: 19\n    }\n  }, \"-\", pointsDiscount.toLocaleString())), promoDiscount > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"discount cost-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 289,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 290,\n      columnNumber: 19\n    }\n  }, \"Promo Discount (\", promoCode.toUpperCase(), \": \", promoDiscount, \"%)\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cost-discount\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 291,\n      columnNumber: 19\n    }\n  }, \"-\", promoAmount.toLocaleString())), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"total cost-item\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296,\n      columnNumber: 17\n    }\n  }, \"Total Amount\"), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"cost-total\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 17\n    }\n  }, total.toLocaleString()))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promosection\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 301,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302,\n      columnNumber: 15\n    }\n  }, \"Promo Code\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promo-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 303,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    value: promoCode,\n    onChange: e => setPromoCode(e.target.value),\n    placeholder: \"Enter your code\",\n    disabled: applyingPromo || success,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 304,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    className: `promo-button ${applyingPromo ? 'loading' : ''}`,\n    onClick: handleApplyPromo,\n    disabled: applyingPromo || success,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311,\n      columnNumber: 17\n    }\n  }, applyingPromo ? 'Applying...' : 'Apply')), promoError && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promo-error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 319,\n      columnNumber: 30\n    }\n  }, promoError), promoDiscount > 0 && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"promo-success\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320,\n      columnNumber: 37\n    }\n  }, \"Promo code applied successfully!\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"payment-card\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"card-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 325,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 326,\n      columnNumber: 15\n    }\n  }, \"Card Payment\"), /*#__PURE__*/React.createElement(Lock, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit,\n    className: \"payment-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 330,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: `stripe-card ${isCardFocused ? 'focused' : ''}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 331,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(CardElement, {\n    onFocus: () => setIsCardFocused(true),\n    onBlur: () => setIsCardFocused(false),\n    options: {\n      style: {\n        base: {\n          fontSize: '16px',\n          fontWeight: '500',\n          fontFamily: 'Inter, system-ui, sans-serif',\n          color: '#1a1f36',\n          '::placeholder': {\n            color: '#6b7280'\n          },\n          padding: '20px 0'\n        },\n        invalid: {\n          color: '#ef4444'\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 17\n    }\n  })), error && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"error-message slide-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 25\n    }\n  }, error), success && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"success-message slide-in\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 27\n    }\n  }, \"Payment successful! Redirecting to confirmation page...\"), /*#__PURE__*/React.createElement(\"button\", {\n    className: `payment-button ${loading ? 'loading' : ''}`,\n    type: \"submit\",\n    disabled: !stripe || loading || success,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 15\n    }\n  }, loading ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"spinner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 365,\n      columnNumber: 21\n    }\n  }), \"Processing Payment...\") : /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Lock, {\n    size: 18,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 370,\n      columnNumber: 21\n    }\n  }), \"Pay \", total.toLocaleString()))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"security-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 377,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Shield, {\n    size: 16,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379,\n      columnNumber: 15\n    }\n  }, \"Your payment information is encrypted and secure\"))))));\n};\nexport default CheckoutPage;","map":{"version":3,"names":["React","useState","useEffect","CardElement","useStripe","useElements","useNavigate","useLocation","axios","CreditCard","Lock","Calendar","User","Shield","Navbar","CheckoutPage","stripe","elements","navigate","location","loading","setLoading","error","setError","success","setSuccess","promoCode","setPromoCode","isCardFocused","setIsCardFocused","tripData","setTripData","initialLoad","setInitialLoad","applyingPromo","setApplyingPromo","promoDiscount","setPromoDiscount","promoError","setPromoError","fetchTripData","_location$state","state","tripId","response","get","console","log","data","checkoutData","days","discountPercentage","summary","err","calculateTotals","subtotal","discount","total","reduce","sum","day","totalCost","pointsDiscount","promoAmount","totalDiscount","handleApplyPromo","trim","mockValidCodes","toUpperCase","timer","setTimeout","paymentDetails","amount","date","Date","toISOString","status","clearTimeout","handleSubmit","event","preventDefault","post","Error","message","clientSecret","stripeError","paymentIntent","confirmCardPayment","payment_method","card","getElement","_location$state2","patch","method","promoApplied","createElement","className","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","onClick","window","reload","size","from","to","startDate","toLocaleDateString","month","endDate","year","guests","duration","map","index","key","title","toLocaleString","type","value","onChange","e","target","placeholder","disabled","onSubmit","onFocus","onBlur","options","style","base","fontSize","fontWeight","fontFamily","color","padding","invalid","Fragment"],"sources":["F:/Web/Voyaige/Voyaige/proj/front/src/components/CheckoutPage/CheckoutPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { CardElement, useStripe, useElements } from '@stripe/react-stripe-js';\r\nimport { useNavigate, useLocation } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport { CreditCard, Lock, Calendar, User, Shield } from 'lucide-react';\r\nimport './CheckoutPage.css';\r\nimport Navbar from '../NavBar/Navbar';\r\nimport './Checkout2.css'\r\n\r\nconst CheckoutPage = () => {\r\n  const stripe = useStripe();\r\n  const elements = useElements();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(false);\r\n  const [promoCode, setPromoCode] = useState('');\r\n  const [isCardFocused, setIsCardFocused] = useState(false);\r\n  const [tripData, setTripData] = useState(null);\r\n  const [initialLoad, setInitialLoad] = useState(true);\r\n  const [applyingPromo, setApplyingPromo] = useState(false);\r\n  const [promoDiscount, setPromoDiscount] = useState(0);\r\n  const [promoError, setPromoError] = useState(null);\r\n\r\n  // Load trip data from location state or API\r\n  useEffect(() => {\r\n    const fetchTripData = async () => {\r\n      try {\r\n        if (location.state?.tripId) {\r\n          const response = await axios.get(`http://localhost:5000/api/trips/${location.state.tripId}`);\r\n          console.log(response);\r\n          if (response.data && response.data.checkoutData) {\r\n            setTripData({\r\n              days: response.data.checkoutData.days || [],\r\n              discountPercentage: response.data.checkoutData.discountPercentage || 0,\r\n              summary: response.data.checkoutData.summary || {}\r\n            });\r\n            \r\n          } else {\r\n            setError(\"Trip data not found or incomplete\");\r\n          }\r\n        } else {\r\n          // Redirect to customization page if no trip ID is provided\r\n          navigate('/UserCustomization');\r\n        }\r\n      } catch (err) {\r\n        console.error(\"Error fetching trip data:\", err);\r\n        setError(\"Could not load trip data. Please try again.\");\r\n      } finally {\r\n        setInitialLoad(false);\r\n      }\r\n    };\r\n\r\n    fetchTripData();\r\n  }, [location.state, navigate]);\r\n\r\n  // Calculate totals from trip data\r\n  const calculateTotals = () => {\r\n    if (!tripData || !tripData.days) return { subtotal: 0, discount: 0, total: 0 };\r\n    \r\n    const subtotal = tripData.days.reduce((sum, day) => sum + day.totalCost, 0);\r\n    const pointsDiscount = (subtotal * (tripData.discountPercentage || 0)) / 100;\r\n    const promoAmount = (subtotal * promoDiscount) / 100;\r\n    const totalDiscount = pointsDiscount + promoAmount;\r\n    const total = subtotal - totalDiscount;\r\n    return { subtotal, discount: totalDiscount, total, pointsDiscount, promoAmount };\r\n  };\r\n\r\n  // Handle promo code application\r\n  const handleApplyPromo = async () => {\r\n    if (!promoCode.trim()) {\r\n      setPromoError(\"Please enter a promo code\");\r\n      return;\r\n    }\r\n    \r\n    setApplyingPromo(true);\r\n    setPromoError(null);\r\n    \r\n    try {\r\n      // Mock API call for promo code validation\r\n      // In a real application, this would be a call to your backend\r\n      // const response = await axios.post('http://localhost:5000/api/validate-promo', { code: promoCode });\r\n      \r\n      // Simulating API response for demo purposes\r\n      const mockValidCodes = {\r\n        'WELCOME10': 10,\r\n        'TRAVEL20': 20,\r\n        'FIRSTTRIP': 15\r\n      };\r\n      \r\n      if (mockValidCodes[promoCode.toUpperCase()]) {\r\n        setPromoDiscount(mockValidCodes[promoCode.toUpperCase()]);\r\n        setPromoError(null);\r\n      } else {\r\n        setPromoError(\"Invalid promo code\");\r\n        setPromoDiscount(0);\r\n      }\r\n    } catch (err) {\r\n      setPromoError(\"Error applying promo code\");\r\n      setPromoDiscount(0);\r\n    } finally {\r\n      setApplyingPromo(false);\r\n    }\r\n  };\r\n\r\n  // Handle redirection after successful payment\r\n  useEffect(() => {\r\n    if (success) {\r\n      const timer = setTimeout(() => {\r\n        navigate('/cart', { \r\n          state: { \r\n            tripData: tripData,\r\n            paymentDetails: {\r\n              amount: calculateTotals().total,\r\n              date: new Date().toISOString(),\r\n              status: 'Paid'\r\n            }\r\n          } \r\n        });\r\n      }, 2000);\r\n      return () => clearTimeout(timer);\r\n    }\r\n  }, [success, navigate, tripData, calculateTotals]); // Added calculateTotals to dependency array\r\n\r\n  // Handle payment submission\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n    \r\n    if (!stripe || !elements) {\r\n      setError(\"Stripe is not properly initialized\");\r\n      setLoading(false);\r\n      return;\r\n    }\r\n  \r\n    try {\r\n      const { total } = calculateTotals();\r\n      \r\n      // Create payment intent\r\n      const response = await axios.post('http://localhost:5000/api/payment-intent', {\r\n        amount: total\r\n      });\r\n  \r\n      if (response.status !== 200) {\r\n        throw new Error(`Error: ${response.data.message}`);\r\n      }\r\n      \r\n      const { clientSecret } = response.data;\r\n  \r\n      // Confirm card payment\r\n      const { error: stripeError, paymentIntent } = await stripe.confirmCardPayment(clientSecret, {\r\n        payment_method: {\r\n          card: elements.getElement(CardElement),\r\n        }\r\n      });\r\n  \r\n      if (stripeError) {\r\n        setError(stripeError.message);\r\n        setSuccess(false);\r\n      } else if (paymentIntent.status === 'succeeded') {\r\n        // Update trip status to 'paid' in the database\r\n        if (location.state?.tripId) {\r\n          await axios.patch(`http://localhost:5000/api/trips/${location.state.tripId}`, {\r\n            status: 'paid',\r\n            paymentDetails: {\r\n              amount: total,\r\n              date: new Date().toISOString(),\r\n              method: 'card',\r\n              promoApplied: promoDiscount > 0 ? promoCode : null,\r\n              promoDiscount: promoDiscount\r\n            }\r\n          });\r\n        }\r\n        \r\n        setSuccess(true);\r\n        setError(null);\r\n      } else {\r\n        setError(`Payment status: ${paymentIntent.status}. Please try again.`);\r\n        setSuccess(false);\r\n      }\r\n    } catch (err) {\r\n      setError(err.message || \"An error occurred while processing your payment\");\r\n      setSuccess(false);\r\n    }\r\n    setLoading(false);\r\n  };\r\n\r\n  // Show loading state during initial data fetch\r\n  if (initialLoad) {\r\n    return (\r\n      <div className=\"checkout-container\">\r\n        <Navbar />\r\n        <div className=\"checkout-content fade-in loading-state\">\r\n          <div className=\"loading-spinner\"></div>\r\n          <p>Loading your trip details...</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Show error state if trip data couldn't be loaded\r\n  if (!tripData && !initialLoad) {\r\n    return (\r\n      <div className=\"checkout-container\">\r\n        <Navbar />\r\n        <div className=\"checkout-content fade-in error-state\">\r\n          <div className=\"error-icon\">⚠️</div>\r\n          <h2>Unable to load trip details</h2>\r\n          <p>{error || \"Please try again or contact support.\"}</p>\r\n          <button className=\"retry-button\" onClick={() => window.location.reload()}>\r\n            Retry\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  const { subtotal, discount, total, pointsDiscount, promoAmount } = calculateTotals();\r\n\r\n  return (\r\n    <div className=\"checkout-container\">\r\n      <Navbar />\r\n      <div className=\"checkout-content fade-in\">\r\n        <div className=\"checkout-header\">\r\n          <h1>Complete Your Payment</h1>\r\n          <div className=\"secure-badge\">\r\n            <Shield size={18} /> Secured & Encrypted\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"checkout-grid\">\r\n          <div className=\"summary-card\">\r\n            <div className=\"card-header\">\r\n              <h2>Trip Summary</h2>\r\n              <CreditCard size={20} />\r\n            </div>\r\n\r\n            {/* Trip details summary */}\r\n            {tripData && tripData.summary && (\r\n              <div className=\"trip-overview\">\r\n                <div className=\"trip-route\">\r\n                  <span className=\"from\">{tripData.summary.from}</span>\r\n                  <span className=\"separator\">→</span>\r\n                  <span className=\"to\">{tripData.summary.to}</span>\r\n                </div>\r\n                <div className=\"trip-dates\">\r\n                  <Calendar size={14} />\r\n                  <span>\r\n                    {new Date(tripData.summary.startDate).toLocaleDateString('en-US', { \r\n                      month: 'short', day: 'numeric' \r\n                    })} - {new Date(tripData.summary.endDate).toLocaleDateString('en-US', { \r\n                      month: 'short', day: 'numeric', year: 'numeric' \r\n                    })}\r\n                  </span>\r\n                </div>\r\n                <div className=\"trip-guests\">\r\n                  <User size={14} />\r\n                  <span>Budget: {tripData.summary.guests === 1 ? 'Economic' : tripData.summary.guests === 2 ? 'Normal' : tripData.summary.guests === 3 ? 'Deluxe' : 'N/A'} • {tripData.summary.duration} {tripData.summary.duration > 1 ? 'Days' : 'Day'}</span>\r\n                </div>\r\n              </div>\r\n            )}\r\n\r\n            <div className=\"cost-breakdown\">\r\n              {tripData && tripData.days.map((day, index) => (\r\n                <div key={index} className=\"cost-item slide-in\">\r\n                  <span>{day.title}</span>\r\n                  <span className=\"cost\">{day.totalCost.toLocaleString()}</span>\r\n                </div>\r\n              ))}\r\n              \r\n              <div className=\"cost-divider\"></div>\r\n              \r\n              <div className=\"subtotal cost-item\">\r\n                <span>Sub-total</span>\r\n                <span className=\"cost\">{subtotal.toLocaleString()}</span>\r\n              </div>\r\n              \r\n              {pointsDiscount > 0 && (\r\n                <div className=\"discount cost-item\">\r\n                  <span>Points Discount ({tripData.discountPercentage}%)</span>\r\n                  <span className=\"cost-discount\">-{pointsDiscount.toLocaleString()}</span>\r\n                </div>\r\n              )}\r\n              \r\n              {promoDiscount > 0 && (\r\n                <div className=\"discount cost-item\">\r\n                  <span>Promo Discount ({promoCode.toUpperCase()}: {promoDiscount}%)</span>\r\n                  <span className=\"cost-discount\">-{promoAmount.toLocaleString()}</span>\r\n                </div>\r\n              )}\r\n              \r\n              <div className=\"total cost-item\">\r\n                <span>Total Amount</span>\r\n                <span className=\"cost-total\">{total.toLocaleString()}</span>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"promosection\">\r\n              <h3>Promo Code</h3>\r\n              <div className=\"promo-input\">\r\n                <input \r\n                  type=\"text\" \r\n                  value={promoCode}\r\n                  onChange={(e) => setPromoCode(e.target.value)}\r\n                  placeholder=\"Enter your code\"\r\n                  disabled={applyingPromo || success}\r\n                />\r\n                <button \r\n                  className={`promo-button ${applyingPromo ? 'loading' : ''}`}\r\n                  onClick={handleApplyPromo}\r\n                  disabled={applyingPromo || success}\r\n                >\r\n                  {applyingPromo ? 'Applying...' : 'Apply'}\r\n                </button>\r\n              </div>\r\n              {promoError && <div className=\"promo-error\">{promoError}</div>}\r\n              {promoDiscount > 0 && <div className=\"promo-success\">Promo code applied successfully!</div>}\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"payment-card\">\r\n            <div className=\"card-header\">\r\n              <h2>Card Payment</h2>\r\n              <Lock size={20} />\r\n            </div>\r\n\r\n            <form onSubmit={handleSubmit} className=\"payment-form\">\r\n              <div className={`stripe-card ${isCardFocused ? 'focused' : ''}`}>\r\n                <CardElement \r\n                  onFocus={() => setIsCardFocused(true)}\r\n                  onBlur={() => setIsCardFocused(false)}\r\n                  options={{\r\n                    style: {\r\n                      base: {\r\n                        fontSize: '16px',\r\n                        fontWeight: '500',\r\n                        fontFamily: 'Inter, system-ui, sans-serif',\r\n                        color: '#1a1f36',\r\n                        '::placeholder': {\r\n                          color: '#6b7280',\r\n                        },\r\n                        padding: '20px 0',\r\n                      },\r\n                      invalid: {\r\n                        color: '#ef4444',\r\n                      },\r\n                    },\r\n                  }}\r\n                />\r\n              </div>\r\n\r\n              {error && <div className=\"error-message slide-in\">{error}</div>}\r\n              {success && <div className=\"success-message slide-in\">Payment successful! Redirecting to confirmation page...</div>}\r\n\r\n              <button \r\n                className={`payment-button ${loading ? 'loading' : ''}`}\r\n                type=\"submit\"\r\n                disabled={!stripe || loading || success}\r\n              >\r\n                {loading ? (\r\n                  <>\r\n                    <div className=\"spinner\"></div>\r\n                    Processing Payment...\r\n                  </>\r\n                ) : (\r\n                  <>\r\n                    <Lock size={18} />\r\n                    Pay {total.toLocaleString()}\r\n                  </>\r\n                )}\r\n              </button>\r\n            </form>\r\n\r\n            <div className=\"security-info\">\r\n              <Shield size={16} />\r\n              <span>Your payment information is encrypted and secure</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}